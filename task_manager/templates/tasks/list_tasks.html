{% extends 'base.html' %}
{% load i18n %}


{% block content %}

        <h1 class="my-4">{% translate 'Tasks' %}</h1>

        <a class="nav-link" href="{% url 'create_task' %}">{% translate 'Create task' %}</a>

        <div class="card mb-3">

            <div class="card-body bg-light">

                <form class="form-inline center" method="get">

                    <div class="form-group"><label for="id_status">{% translate 'Status' %}</label>
                        <div class="ml-2 mr-3">
                            <select name="status" class="form-control" title="" id="id_status">
                                <option value="" selected>---------</option>
                                {% for status in statuses %}
                                <option value="{{ status.pk }}">{{ status.name }}</option>
                                {% endfor%}
                            </select>
                        </div>
                    </div>

                    <div class="form-group"><label for="id_executor">{% translate 'Executor' %}</label>
                        <div class="mr-3 ml-2">
                            <select name="executor" class="form-control" title="" id="id_executor">
                                <option value="" selected>---------</option>
                                {% for user in users %}
                                <option value="{{ user.pk }}">{{ user.first_name }} {{ user.last_name }}</option>
                                {% endfor%}
                            </select>
                        </div>
                    </div>

                    <div class="form-group"><label for="id_label">{% translate 'Label' %}</label>
                        <div class="mr-3 ml-2">
                            <select name="label" class="form-control" title="" id="id_label">
                                <option value="" selected>---------</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="mr-3">
                            <div class="form-check">
                            <input type="checkbox" name="self_tasks" class="form-check-input" id="id_self_tasks">
                            <label class="form-check-label" for="id_self_tasks">{% translate 'Only own tasks' %}</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                      <input class="btn btn-primary" type="submit" value="{% translate 'Show' %}">
                    </div>

                </form>

            </div>

        </div>

        <table class="table table-striped">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>{% translate 'Name' %}</th>
                    <th>{% translate 'Status' %}</th>
                    <th>{% translate 'Author' %}</th>
                    <th>{% translate 'Executor' %}</th>
                    <th>{% translate 'Date of creation' %}</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {% for task in tasks %}
                    <tr>
                        <td>{{ task.pk }}</td>
                        <td><a href="{% url 'detail_task' task_id=task.pk %}">{{ task.name }}</a></td>
                        <td>{{ task.status }}</td>
                        <td>{{ task.author }}</td>
                        <td>{{ task.executor }}</td>
                        <td>{{ task.created_at|date:"d.m.Y" }} {{ task.created_at|date:"H:i" }}</td>
                        <td>
                            <a href="{% url 'update_task' task_id=task.pk %}">{% translate 'Change' %}</a>
                            <br>
                            <a href="{% url 'delete_task' task_id=task.pk %}">{% translate 'Delete' %}</a>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

{% endblock %}